using Iota.Lib.Utils;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Iota.Lib.Test
{
    [TestClass]
    public class CurlTest
    {
        Curl curl = new Curl(81);

        [TestMethod]
        public void TestCurl()
        {
            string rawTransactionTrytes = "9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999IRNHGOKCHNRLSZBEJPEOBGANWRPPIY9EDIEBWKQGDDGMTCHYQNAPBMCBE9SZMXBQTCTKL99X9BBEBMPYA99999999999999999999999999IA9999999999999999999999999NRWMRYD99999999999B99999999MMUIE9OX9GJFTITCCDAVGCEAWRPABVQASL9LCIIOHKIJUGTHLWKYVUWLDGRXUQDWEHSKF9XHSHOKKIOXYICNMTUJJXXXXENFFEJGNANQFDHIPZBZF9QUSVMSHJEQEHAEZBMNRVSJGDOHDFHSVDBBFJRYSLHRUZX999NLOJJFIXHVFSPSKPPRYTKSCHRQVPKXYJ9NCW9WMQUAGWVPRKZFQDQHYQLAKQCERUFSRZCCYOKBZBKB999IA9999999999999999999999999PZINHFZJE999999999L99999999SSC9SQFZDAQKDKPWUPPFHJUGLZD";
            var afterSqueezeExpect = "WGULM9FOVLRHPCQT9N9UZNK99BSZ9KQTECJTDLOHZJRBNCTBDHNRQDRRYOOLD9PSWVECHJHIYXMQYM999";
            curl.Absorb(Converter.ConvertTrytesToTrits(rawTransactionTrytes));
            int[] hash = new int[243];
            curl.Squeeze(ref hash);
            Assert.AreEqual(afterSqueezeExpect, Converter.ConvertTritsToTrytes(hash));
        }
    }
}
